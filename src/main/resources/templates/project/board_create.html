<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CollaTool - 게시글 작성</title>
  <!-- Add the Bootstrap CDN link -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Add the Bootstrap Datepicker CSS and JS links -->
  <script type="text/javascript" src="/login/jquery.min.js"></script>
</head>
<body>
<div class="container mt-5">
  <h1 class="text-center mb-4">게시글 작성</h1>
  <form action="/projectRest/board-create" method="post" id="frm_board">
    <input type="hidden" name="bProjectId" th:value="${bProjectId}">
    <input type="hidden" name="bUId" th:value="${bUId}">
    <div class="form-group">
      <label for="bTitle">제목</label>
      <input type="text" class="form-control" id="bTitle" name="bTitle" placeholder="제목 입력" required>
    </div>
    <div class="form-group">
      <label for="bContent">내용</label>
      <textarea class="form-control" id="bContent" name="bContent" placeholder="내용 입력" required></textarea>
    </div>
    <div class="mt-3">
      <button type="button" class="btn btn-primary mr-2" onclick="btn_submit()">작성</button>
      <button type="button" class="btn btn-secondary" onclick="window.close()">취소</button>
    </div>
  </form>
</div>

<!-- Add the Bootstrap JS and Popper.js CDN links (required for some Bootstrap components) -->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
<!-- Add the Bootstrap Datepicker JS link -->
<!--  <script src="https://cdn.jsdelivr.net/npm/bootstrap-datepicker@1.11.0/dist/js/bootstrap-datepicker.min.js"></script>-->
<!-- Add Bootstrap Icons (Bi) for the calendar icon -->
<!--  <script src="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.24.0/dist/js/bootstrap-icons.min.js"></script>-->
<script>
  // Initialize the DatePickers
  function btn_submit(){
    var board = $("#frm_board").serialize();
    $.ajax({
      url:'/projectRest/board-create',
      type:'POST',
      data:board,
      success:function(response){
        alert("게시글 작성완료.");
        opener.location.reload();
        window.close();
      },
      error:function(response){

        alert("공백을 확인해주세요.");
      }
    });
  }
</script>
</body>
</html>